{% load static %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
        <!-- META -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        
        <!-- TITLE -->
        <title>Wildlife Monitoring System</title>

        <!-- Main StyleSheet -->
        <link href="/static/css/style.css" rel="stylesheet" type="text/css" />
        <link href="/static/css/style-responsive.css" rel="stylesheet" type="text/css" media="screen" />
        <link href="/static/css/font-awesome.css" rel="stylesheet" type="text/css" />
        <!--<link rel="stylesheet" href="css/bootstrap.min.css">-->
        <link rel="stylesheet" href="/static/css/libs/animate.css">


        <!-- bxSlider CSS file -->
        <link href="/static/css/jquery.bxslider.css" rel="stylesheet" />


        <!-- LayerSlider stylesheet -->
        <link rel="stylesheet" href="/static/layerslider/css/layerslider.css" type="text/css">
        <!-- External libraries: jQuery & GreenSock -->
        <script src="{% static 'layerslider/js/jquery.js' %}" type="text/javascript"></script>
        <script src="{% static 'layerslider/js/greensock.js' %}" type="text/javascript"></script>
        <!-- LayerSlider script files -->
        <script src="{% static 'layerslider/js/layerslider.transitions.js' %}" type="text/javascript"></script>
        <script src="{% static 'layerslider/js/layerslider.kreaturamedia.jquery.js' %}" type="text/javascript"></script>
        
        <script src="{% static 'js/bootstrap.min.js' %}" type="text/javascript"></script>
        

        <!-- bxSlider Javascript file -->
        <script src="{% static 'js/jquery.bxslider.js' %}"></script>
        <script>
        $(document).ready(function(){
        $('.bxslider').bxSlider({
                                
                                pager: false,
                                controls: true,
                                auto: true
                                
                                
                                });
        });
        </script>



        <link rel="stylesheet" type="text/css" href="/static/lightbox/jquery.fancybox.css" media="screen" />
        <script src="{% static 'lightbox/jquery.fancybox.js' %}"></script>
        <script type="text/javascript">
                $(document).ready(function() {
                                           
                    $('.fancybox').fancybox();
        
                });
        </script>


        <!-- GOTO TOP JQUERY -->
        <script type="text/javascript">
        $(function() {
            $(window).scroll(function() {
                if($(this).scrollTop() != 0) {
                    $('#gotop').fadeIn();   
                } else {
                    $('#gotop').fadeOut();
                }
            });
         
            $('#gotop').click(function() {
                $('body,html').animate({scrollTop:0},800);
            }); 
        });
        </script>
            


        <!-- HEADER JQUERY -->
        <script type="text/javascript">
        $(function() {
            $(window).scroll(function() {
                if($(this).scrollTop() >= 200) {
                    $('.header').addClass("header_fix");    
                } else {
                   $('.header').removeClass("header_fix");
                }
            }); 
        });
        </script>
        
        
        <script type="text/javascript">
        
        if($(window).width() <= 900){
        $(document).ready(function() {
                                    
                                    
                                    
                    $('.mobile .title').click(function() {
                                                
                                                $(this).next("ul").slideToggle();
                                                $(this).toggleClass("minus");
                                                
                                                });
                    
                    
        
                });
        
        }
        </script>
                            
</head>

<body>
        
        
    
<!--         <div class="header">
        <div class="container">
        
                    <h4>野生动物监测系统</h4>
                    
                    <div class="nav mobile">
                    <div class="title">Menu <span class="fa "></span></div>
                    <ul>
                    <li><a href="#faqs_part">FAQs</a></li>
                    <li><a href="#features">FEATURES</a></li>
                    <li><a href="#testimonials_part">Testimonials </a></li>
                    <li><a href="#pricing_part">Pricing</a></li>
                    <li><a href="#contact_part">Contact</a></li>
                    <li><a href="#subscribe_part">Sign Up</a></li>  send_email'+ wildlifenum +'()
                    </ul>
                    </div>
        
        </div>
        </div> -->
                    <div class="common_section">
                    <h2>野生动物监测系统</h2>
                    </div>
<!--                     <h4 style="margin:0 0 40px 0;">One machine can do the work of fifty ordinary men. No machine can do the work of one extraordinary man</h4> -->

        <div class="wrapper">

                    
                <div id="update"></div>
        <script type="http://apps.bdimg.com/libs/jquery/1.11.1/jquery.min.js"></script>
        <script>
            setInterval("test()",1000)
            //$(document).ready(
                function test(){
                //$("#test").click(function(){
                    $.ajax({
                        url:"{% url 'upload_video' %}",
                        type:"GET",
                        //async:true
                        success: function(data){
                            $.each(data,function(key,value){
                                wildlifenum = value[0];
                                if(document.getElementById(wildlifenum))
                                {
                                    return true;
                                }
                                else
                                {
                                var html = '';
                                var wildlife_name = value[2];
                                var alarm_loca = value[1];
                                html += '<div class="feature_section ano_feature_section">';
                                html += '<div class="container">';
                                html += '<div class="rightside">';
                                html += '<h2>' + alarm_loca + '</h2><br />' + '<h2>' + wildlife_name + '</h2>';
                                html += '<div class="feature">';
                                html += '<a href="javascript:void(0);" onclick="send_email'+ wildlifenum+'()"><span class="fa fa-life-ring"></span></a>'; //new
                                html += '<div class="description"> ';
                                html += '<strong>发出警报</strong> <br />';
                                html += '</div>';
                                html += '</div>';
                                html += '<div class="feature">';
                                html += '<a href="javascript:void(0);" onclick="source_video'+wildlifenum+'()"><span class="fa fa-play-circle-o"></span></a>';
                                html += '<div class="description"> ';
                                html += '<strong>视频链接 源视频名: '+wildlifenum+'</strong> <br />';
                                html += '</div>';
                                html += '</div>';
                                html += '</div>';
                                html += '<div class="leftside" id="' + wildlifenum + '">';
                                html += '<video id="' + wildlifenum + '" src="' + key + '" width="443" height="290" type="video/mp4" autoplay="autoplay" controls="controls"></video>';
                                html += '</div>';
                                html += '</div>';
                                html += '</div>'; //下面是new
                                html += '<script>';
                                html += 'function send_email'+ wildlifenum +'(){'; 
                                html += '$.get("{% url 'raise_alarm' %}",{"wildlife_name":"' + wildlife_name +'","alarm_loca":"' + alarm_loca + '"});}';
                                html += 'function source_video'+ wildlifenum +'(){'; 
                                html += '$.get("{% url 'download_video' %}",{"video_name":"' + wildlifenum +'"}, function(data){$("#source").append(data);});}';
                                html += '<\/script>';
                                $('#update').append(html);}
                                
                            });
                        }
                    });
            }
        </script>
        <!-- 总体的逻辑是后台算法往static中添加图片，ajax定时发送请求检索新图片。var videoinfo=data;videoinfo+="<iframe src='static/video/0.mp4'><\/iframe>";alert(videoinfo);-->
        

        
        
        
<!--         <div class="common_section" id="contact_part">
        <div class="container">
        
                    <h2>Get in touch with us</h2>
                    <h4>term sheet convertible note colluding bootstrapping</h4>
                    
                   
                    <br clear="all" />
                    
                    
                    <form method="post" class="hpform">
                    <input type="text" placeholder="Name" />
                    <input type="email" placeholder="Email" />
                    <textarea placeholder="Message"></textarea>
                    <input type="submit" value="SEND" />
                    </form>
                    
                   
                    
        
        </div>
        </div> -->
        
        
        
        
<!--         <div class="subscribe_section" id="subscribe_part">
        <div class="container">
        
                    <h2>Subscribe to our newsletter</h2>
                    
                   
                    <br clear="all" />
                    
                    
                    <form method="post">
                    <input type="email" placeholder="Enter your e-Mail" />
                    <input type="submit" value="SUBSCRIBE" />
                    </form>
                    
                   
                    
        
        </div>
        </div> -->
        
        
        
        
        <div class="common_section">
        <div class="container">
<!--             <div class = "videopreview">
            <iframe src="G:\Tensorflow\models\research\object_detection\elephant1.mp4" width="543" height="390" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
            </div> -->
                    <a href="#" class="footer_logo" id = "source"><h2>监控源视频</h2></a>
                                    
        
        </div>
        </div>
        
<!--         <iframe src="../static/video/1_wy_elephant.mp4" width="443" height="290" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> -->
        </div><!--wrapper-->


        <script>
            jQuery("#layerslider").layerSlider({
                responsive: false,
                responsiveUnder: 1100,
                layersContainer: 1100,
                skin: 'fullwidth',
                hoverPrevNext: false,
                skinsPath: 'layerslider/skins/'
            });
        
        
        </script>

        <script src="{% static 'js/wow.js' %}"></script>
        <script>
        wow = new WOW(
          {
            animateClass: 'animated',
            offset:       100
          }
        );
        wow.init();
        document.getElementById('moar').onclick = function() {
          var section = document.createElement('section');
          section.className = 'section--purple wow fadeInDown';
          this.parentNode.insertBefore(section, this);
        };
        </script>

        <script type="text/javascript">
        $(function() {
        $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
        $('html,body').animate({
        scrollTop: target.offset().top - 132
        }, 2000);
        return false;
        }
        }
        });
        });
        </script>
        
        
        <script type="text/javascript">
        
        
        $(document).ready(function() {
        
        if($(window).width() <= 1200){
        
        
        $(function() {
        $('a[href*=#]:not([href=#])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
        if (target.length) {
        $('html,body').animate({
        scrollTop: target.offset().top - 132
        }, 2000);
        return false;
        }
        }
        });
        });
        
        
        
        }
        
        });
        
        
        </script> 
             

        
</body>
</html>